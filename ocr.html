<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Escáner OCR - RecipeHub Premium</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/responsive.css">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200">
</head>

<body class="ocr-app">
    <div class="ocr-viewport">
        <!-- Barra Superior -->
        <div class="ocr-header">
            <button class="btn-back-ocr" onclick="history.back()">
                <span class="material-symbols-outlined">close</span>
            </button>
            <div class="ocr-title">Escáner de Recetas</div>
            <button id="btnFlash" class="btn-icon-ocr">
                <span class="material-symbols-outlined">flash_on</span>
            </button>
        </div>

        <!-- Cámara -->
        <div class="camera-preview">
            <video id="videoFeed" autoplay playsinline muted></video>
            <div class="camera-overlay">
                <div class="camera-guides">
                    <div class="scanning-line"></div>
                </div>
            </div>

            <!-- Toast de Ayuda -->
            <div class="camera-tip">
                Alinea el texto dentro del recuadro
            </div>
        </div>

        <!-- Controles Inferiores -->
        <div class="camera-controls">
            <!-- Selector de Galería -->
            <button id="btnGallery" class="btn-icon-ocr">
                <span class="material-symbols-outlined">photo_library</span>
                <input type="file" id="ocrGalleryInput" accept="image/*" hidden>
            </button>

            <!-- Botón Obturador -->
            <button id="btnCapture" class="btn-capture"></button>

            <!-- Cambio Cámara -->
            <button id="btnSwitchCamera" class="btn-icon-ocr">
                <span class="material-symbols-outlined">flip_camera_ios</span>
            </button>
        </div>

        <!-- Modal de Procesamiento/Resultados (Overlay) -->
        <div id="ocrModal" class="ocr-modal hidden">
            <div class="ocr-modal-content">
                <div id="ocrLoading" class="ocr-loading-state">
                    <div class="premium-spinner"></div>
                    <h3>Procesando Receta</h3>
                    <p>Estamos extrayendo los ingredientes y pasos...</p>
                </div>

                <div id="ocrResults" class="ocr-results hidden">
                    <h3>Texto Extraído</h3>
                    <div class="results-container">
                        <textarea id="extractedText" class="premium-textarea"></textarea>
                    </div>
                    <div class="modal-actions">
                        <button id="btnRetryOCR" class="btn-secondary">Reintentar</button>
                        <button id="btnImportOCR" class="btn-primary">Importar Datos</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/utils.js"></script>
    <script src="js/ocr.js"></script>
</body>

</html>